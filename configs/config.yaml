log:
  level: 1 # 0 - debug, 1 - info, 2 - warn, 3 - error, -1 - trace (logs all headers and body, exposes sensitive data)

# Authentication configuration (recommended - new in v0.14.0)
auth:
  jwks_cert_url: https://sso.example.com/realms/internal/protocol/openid-connect/certs # url to jwks cert of oauth provider
  auth_header: "Authorization" # header name for JWT token
  auth_scheme: "Bearer" # authentication scheme prefix (use "" for raw tokens)
  claims:
    username: "preferred_username" # JWT claim for username (default: preferred_username)
    email: "email"                 # JWT claim for email (default: email)
    groups: "groups"               # JWT claim for groups (default: groups)

# Legacy web configuration (deprecated - use auth section above)
# These fields are maintained for backward compatibility but will be removed in a future release
web:
  proxy_port: 8080 # port to listen on
  metrics_port: 8081 # metrics port to listen on
  host: localhost # host to listen on
  tls_verify_skip: true # skip tls verification very insecurely!!!
  trusted_root_ca_path: "./certs/" # path to trusted root ca
admin:
  bypass: true # enable admin bypass
  group: gepardec-run-admins # group name for admin bypass

alert:
  enabled: false # enable alerting
  token_header: "X-Multena-alert" # header to use for the token
  alert_cert_url: https://sso.example.com/realms/internal/protocol/openid-connect/certs # url to jwks cert of oauth provider
  alert_cert: '{"keys":[{"kid":"hXq9diKCkHZaB7QSj525rXvFxNGOPx1VJH0U3da1su4","kty":"RSA","alg":"RS256","use":"sig","n":"0H_0xxGplF1nm3OTQitGXz3S-3woZfu_APxrGIKY8i43m6K0RiFo11wVmU-4Uyko4-hvKSUV1FgMOvq5eU4e8wqnb7th3fQpKvY_HT1RHokCUUn37hLXISiOrtb21vjYmJkyw_P1ToSgQdLsryIaEisKhXD_62pBtK8fYOo3Bx-ggCSm3OjWBEUeozWFhRYsgeCrTKUbqlAQb3rlW4aA0Ay7XJfgSuMxWIYR49hX1FFPxkHnyofWDSuSE6gUiF1VhYoYi1V4siXmVEp2FYJmXBHvrbtvmfYXg6NPR7m7aUoagdcK0T1jInUpZMk_WRxPMlbTO9WfcdXXUpXhDWruWw","e":"AQAB","x5c":["MIIClTCCAX0CBgFiUtsSYDANBgkqhkiG9w0BAQsFADAOMQwwCgYDVQQDDANhcGEwHhcNMTgwMzIzMTIzMzMxWhcNMjgwMzIzMTIzNTExWjAOMQwwCgYDVQQDDANhcGEwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQDQf/THEamUXWebc5NCK0ZfPdL7fChl+78A/GsYgpjyLjeborRGIWjXXBWZT7hTKSjj6G8pJRXUWAw6+rl5Th7zCqdvu2Hd9Ckq9j8dPVEeiQJRSffuEtchKI6u1vbW+NiYmTLD8/VOhKBB0uyvIhoSKwqFcP/rakG0rx9g6jcHH6CAJKbc6NYERR6jNYWFFiyB4KtMpRuqUBBveuVbhoDQDLtcl+BK4zFYhhHj2FfUUU/GQefKh9YNK5ITqBSIXVWFihiLVXiyJeZUSnYVgmZcEe+tu2+Z9heDo09HubtpShqB1wrRPWMidSlkyT9ZHE8yVtM71Z9x1ddSleENau5bAgMBAAEwDQYJKoZIhvcNAQELBQADggEBAAZT9fh2G/buEy74xZmfkKlhzXgpJSO43b4qelzws8/BiV2VokZkUykq+8/dbMzMmzQkRl9hQPRtquVhG4NdI+3hiVxSD7thH7l7RjNCXkdR4pLWRCCknBHB0rOwoz3GrM1NkHFC8m80N+vTj3cyMuCFC2mziv9t0EmRhtLEY3r+DawOudk19pbo+j8kkVgoNDxjXMR0YwSdL9Nim/LenJ/I5Y6KwXy4GEMLxGptMuVkj26BXlhVv2SfuxXiwUG1+zNzP327CZgwWbfKVvB0S98XMhCxFzXWu/RzSe0F02RmxJJ6n1z1tpkRkQCBdnCY6I2iisbYsIv2T3LqAWll3kU="],"x5t":"dlKWNkbMJ299cgIzU70toltlNiU","x5t#S256":"SGWTaLggCJGgxSgw58OIsEaRY-5DEa7y7SzTgo3Jt0o"}]}'

dev:
  enabled: false # enable dev mode, but dont use in production
  username: example # username for dev mode

# Global proxy configuration (optional - sensible defaults if not specified)
# These settings optimize HTTP client transport for high-throughput reverse proxy operations
# Configuration precedence: upstream-specific > global > built-in defaults
#proxy:
#  request_timeout: 60s          # Maximum request duration (default: 60s)
#  idle_conn_timeout: 90s        # Keep-alive duration for idle connections (default: 90s)
#  tls_handshake_timeout: 10s    # Timeout for TLS handshake (default: 10s)
#  max_idle_conns: 500           # Total idle connections across all upstreams (default: 500)
#  max_idle_conns_per_host: 100  # Idle connections per upstream (default: 100)
#  force_http2: true             # Enable HTTP/2 when available (default: true)

thanos:
  url: https://localhost:9091 # url to thanos querier
  cert: "./certs/thanos/tls.crt" # path to thanos mtls cert
  key: "./certs/thanos/tls.key" # path to thanos mtls key
  headers:
    "example": "application" # header to use
    "compresion": "gzip" # header to use
  # Per-upstream proxy configuration (optional - overrides global defaults)
  # Uncomment to customize Thanos-specific timeouts and connection pooling
  #proxy:
  #  request_timeout: 60s          # Override: Thanos query timeout
  #  max_idle_conns_per_host: 100  # Override: Connection pool size for Thanos

loki:
  url: https://localhost:3100 # url to loki querier
  cert: "./certs/loki/tls.crt" # path to loki mtls cert
  key: "./certs/loki/tls.key" # path to loki mtls key
  headers:
    "X-Scope-OrgID": "application" # header to use for loki tenant
  # Per-upstream proxy configuration (optional - overrides global defaults)
  # Example: Loki may need longer timeout for log queries and higher connection pool
  #proxy:
  #  request_timeout: 120s         # Override: Loki queries can be slow
  #  max_idle_conns_per_host: 150  # Override: High log volume needs more connections

tempo:
  url: https://localhost:3200 # url to tempo querier
  cert: "./certs/tempo/tls.crt" # path to tempo mtls cert
  key: "./certs/tempo/tls.key" # path to tempo mtls key
  headers:
    "X-Scope-OrgID": "application" # header to use for tempo tenant
  actor_header: "X-Tempo-User" # optional header for fair usage tracking (base64 encoded username)
  # Per-upstream proxy configuration (optional - overrides global defaults)
  # Example: Tempo trace queries may need longer timeout but fewer connections
  #proxy:
  #  request_timeout: 300s        # Override: Trace queries need longer timeout
  #  max_idle_conns_per_host: 50  # Override: Lower volume, fewer connections needed

labelstore:
  config_paths: # paths to search for label configuration files (labels.yaml)
    - /etc/config/labels/ # Kubernetes ConfigMap mount path
    - ./configs # Local development path
  # Additional configuration fields can be added here for custom label store implementations
  # Each label store should document which fields it uses

NotRealKey:
  forTesting: purpose
